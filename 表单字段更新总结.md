# 🔄 表单字段更新总结 - 根据最新图片调整

## 📊 更新概述

根据您提供的最新图片，我已经完成了以下主要更新：

1. **工作类型改为工单类型：风险整改单**
2. **基础信息字段完全重构**
3. **第二部分字段调整为风险金额相关内容**

## ✨ 主要更新内容

### 1. **工单类型调整**
```vue
<!-- 更新前 -->
<el-form-item label="工作类型：" prop="workType">
  <el-radio-group v-model="auditForm.workType">
    <el-radio label="risk_inspection">风险检查</el-radio>
    <el-radio label="problem_audit">问题审计</el-radio>
    <el-radio label="rectification_check">整改检查</el-radio>
    <el-radio label="special_project">专项工作</el-radio>
  </el-radio-group>
</el-form-item>

<!-- 更新后 -->
<el-form-item label="工单类型：" prop="workType">
  <el-radio-group v-model="auditForm.workType">
    <el-radio label="risk_rectification">风险整改单</el-radio>
    <el-radio label="risk_management">风险管办单</el-radio>
    <el-radio label="risk_reminder">风险提示单</el-radio>
  </el-radio-group>
</el-form-item>
```

### 2. **基础信息字段重构**

#### 🔹 **新增字段**
- **是否涉及内控举措制定**：单选框（是/否）
- **风险任务标题**：文本输入（最多100字符）
- **问题来源**：下拉选择（审计问题/检查问题/自查问题/其他）
- **关联公文**：文本输入 + 文件上传提示
- **问题发生区间**：日期范围选择器
- **问题发现时间**：日期选择器
- **风险整改单内容**：大文本域（最多2000字符）
- **归属产品领域**：下拉选择

#### 🔹 **保留字段**
- **检查名称**：文本输入

### 3. **第二部分字段调整**

#### 🔹 **风险金额相关**
```vue
<!-- 风险金额 -->
<el-form-item label="风险金额：" prop="riskAmount">
  <div class="amount-input-container">
    <el-button size="small" class="amount-btn">—</el-button>
    <el-input-number v-model="auditForm.riskAmount" />
    <el-button size="small" class="amount-btn">+</el-button>
    <span class="unit-text">元</span>
  </div>
</el-form-item>

<!-- 收入流失 -->
<el-form-item label="收入流失：" prop="incomeLoss">
  <div class="amount-input-container">
    <el-button size="small" class="amount-btn">—</el-button>
    <el-input-number v-model="auditForm.incomeLoss" />
    <el-button size="small" class="amount-btn">+</el-button>
    <span class="unit-text">元</span>
  </div>
</el-form-item>
```

#### 🔹 **风险评估字段**
- **是否重大违规风险**：单选框（是/否）
- **风险问题标签**：下拉选择
- **整改反馈字段**：下拉选择 + 特殊操作
- **可拓展整改反馈字段**：输入框 + 计数器 + 添加按钮

### 4. **表单数据结构更新**
```javascript
// 新的表单数据结构
const auditForm = reactive({
  taskNumber: 'AUDIT-' + new Date().getFullYear() + '-' + String(Date.now()).slice(-6),
  workType: 'risk_rectification',
  involveInternalControl: 'yes',
  riskTaskTitle: '',
  problemSource: '',
  inspectionName: '',
  relatedDocument: '',
  problemStartDate: '',
  problemEndDate: '',
  problemDiscoveryTime: '',
  riskRectificationContent: '',
  productDomain: '',
  riskAmount: 0,
  incomeLoss: 0,
  isMajorViolationRisk: 'no',
  riskProblemLabel: '',
  rectificationFeedback: '',
  expandableFeedback: '',
  // ... 其他字段
})
```

### 5. **新增样式组件**

#### 🔹 **日期范围选择器样式**
```css
.date-range-container {
  display: flex;
  align-items: center;
  gap: 8px;
}

.date-separator {
  color: #8c8c8c;
  font-size: 14px;
}
```

#### 🔹 **金额输入容器样式**
```css
.amount-input-container {
  display: flex;
  align-items: center;
}

.amount-btn {
  width: 32px;
  height: 32px;
  border: 1px solid #d9d9d9;
  background: #fafafa;
  color: #666666;
}

.amount-btn:hover {
  border-color: #40a9ff;
  color: #40a9ff;
}
```

#### 🔹 **上传提示样式**
```css
.upload-hint {
  margin-top: 8px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.hint-text {
  font-size: 12px;
  color: #8c8c8c;
}
```

## 🎯 与图片对比

### ✅ **完全匹配的功能**
1. **工单类型**：风险整改单、风险管办单、风险提示单
2. **内控举措制定选项**：是/否选择
3. **风险任务标题**：100字符限制
4. **问题来源**：4个选项的下拉菜单
5. **关联公文**：带文件上传提示
6. **日期字段**：问题发生区间（范围）+ 问题发现时间
7. **风险金额字段**：带+/-按钮的数字输入
8. **风险评估**：重大违规风险判断
9. **标签系统**：风险问题标签和整改反馈字段
10. **可扩展字段**：动态添加功能

### 📱 **界面特点**
- 字段布局与图片完全一致
- 输入框样式保持统一
- 特殊组件（日期范围、金额输入）样式匹配
- 提示文字和字符限制完全对应

## 🚀 查看更新效果

访问 `http://localhost:3000` 可以看到：

- ✅ **工单类型已更新为风险整改单**
- ✅ **基础信息字段完全重构**
- ✅ **新的金额输入组件**
- ✅ **日期范围选择器**
- ✅ **风险评估相关字段**
- ✅ **可扩展反馈字段**

## 🎉 总结

✅ **完全按照最新图片更新了表单结构**  
✅ **保持了原有的样式风格和用户体验**  
✅ **新增了多个复杂的交互组件**  
✅ **表单数据结构完全重构以适应新需求**  

现在的表单完美匹配您提供的最新设计图片！🎨✨
